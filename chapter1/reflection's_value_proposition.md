# 1.1 反射的值命题

**反射**是运行时程序能够检测自身及其运行环境，并根据检测结果改变其行为的能力。

要实施这种自检，程序需要一种表示自身的形式。我们称这种信息为**元数据**。在面向对象的世界里，元数据被组织为对象，成为**元对象**，元对象的运行时自检被称为**内省**。

正如前面例子所示，内省之后，紧跟着是行为的改变。通常反射 API 可以使用 3 种技术改变程序的行为：

1. 直接修改原对象
2. 通过元对象做一些操作（比如动态方法调用）
3. 调解，在程序运行的许多阶段，代码被禁止调解。

Java 提供了丰富的对于元数据的操作，仅提供有限的重要调解能力。并且，Java 通过完全禁止直接修改元数据避免了很多复杂性。

这些反射特性可以让程序非常灵活。使用反射的应用对于变化的需求更容易适应。反射组件在其他应用中更容易复用，这些好处在现代 Java 中触手可及。

反射很强大，但并非魔法。你必须掌握反射才能让你的软件更加灵活，仅仅学习概念和 API 是不够的。你必须能够分辨反射的应用场景，比如什么时候反射是必须的，什么时候发射是锦上添花，什么时候应该避免使用反射。本书的例子将帮助你获取这种能力。并且读完本书后，你将明白阻挡反射广泛应用的 3 个问题：

* 安全
* 代码复杂性
* 运行时性能

你将了解到关于安全的顾虑完全是误导，Java 是一门精心设计的语言，而反射 API 也经过细致的限制，安全问题很容易把控。复杂代码通常是对反射的误用，通过学习何时需要反射、何时不需要反射，可以避免不必要的复杂代码。你将会学习如何评估代码设计的性能，从而保证代码满足性能要求。

上面介绍了反射，但几乎没有揭示反射的价值。软件维护成本通常是研发成本的 3 到 4 倍，市场上对软件灵活性的要求在增长，懂得如何写出灵活代码将提升你在市场中的价值。

反射--内省加行为改变--是通往灵活软件之路。
